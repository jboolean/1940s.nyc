import axios from 'axios';
import type { StyleSpecification } from 'maplibre-gl';

function getOnce<T>(fn: () => Promise<T>): () => Promise<T> {
  let p: Promise<T> | null = null;
  return () => (p ??= fn());
}

export const getStyle: () => Promise<StyleSpecification> = getOnce(async () => {
  const latestPhotosSourceUrl = await axios
    .get<{ currentKey: string }>(
      'https://maptiles.1940s.nyc/photos-1940s_version.json'
    )
    .then((res) => res.data.currentKey)
    .then((key: string) => `pmtiles://https://maptiles.1940s.nyc/${key}`);

  return {
    version: 8,
    metadata: { 'maputnik:renderer': 'mlgljs' },
    sources: {
      protomaps: {
        type: 'vector',
        attribution:
          '<a href="https://github.com/protomaps/basemaps">Protomaps</a> Â© <a href="https://openstreetmap.org">OpenStreetMap</a>',
        url: 'pmtiles://https://maptiles.1940s.nyc/nyc.pmtiles',
      },
      bbl: {
        type: 'vector',
        url: 'pmtiles://https://maptiles.1940s.nyc/bbl.pmtiles',
        attribution: 'MapPLUTO, NYC Planning',
      },
      'photos-1940s': {
        type: 'vector',
        url: latestPhotosSourceUrl,
      },
    },
    sprite: [
      {
        id: 'default',
        url: 'https://protomaps.github.io/basemaps-assets/sprites/v4/light',
      },
      {
        id: 'custom',
        url: 'https://maptiles.1940s.nyc/assets/sprites/custom',
      },
    ],
    glyphs: 'https://maptiles.1940s.nyc/assets/fonts/{fontstack}/{range}.pbf',
    layers: [
      {
        id: 'background',
        type: 'background',
        paint: { 'background-color': '#fcf6e9' },
      },
      {
        id: 'earth',
        type: 'fill',
        source: 'protomaps',
        'source-layer': 'earth',
        filter: ['==', '$type', 'Polygon'],
        layout: { visibility: 'none' },
        paint: { 'fill-color': '#fcf6e9' },
      },
      {
        id: 'landcover',
        type: 'fill',
        source: 'protomaps',
        'source-layer': 'landcover',
        layout: { visibility: 'none' },
        paint: {
          'fill-color': [
            'match',
            ['get', 'kind'],
            'grassland',
            'rgba(210, 239, 207, 1)',
            'barren',
            'rgba(255, 243, 215, 1)',
            'urban_area',
            'rgba(230, 230, 230, 1)',
            'farmland',
            'rgba(216, 239, 210, 1)',
            'glacier',
            'rgba(255, 255, 255, 1)',
            'scrub',
            'rgba(234, 239, 210, 1)',
            'rgba(196, 231, 210, 1)',
          ],
          'fill-opacity': ['interpolate', ['linear'], ['zoom'], 5, 1, 7, 0],
        },
      },
      {
        id: 'landuse_park',
        type: 'fill',
        source: 'protomaps',
        'source-layer': 'landuse',
        filter: [
          'all',
          [
            'in',
            'kind',
            'national_park',
            'park',
            'cemetery',
            'protected_area',
            'forest',
            'golf_course',
            'nature_reserve',
            'forest',
            'scrub',
            'military',
            'naval_base',
            'airfield',
          ],
        ],
        layout: { visibility: 'visible' },
        paint: {
          'fill-opacity': ['interpolate', ['linear'], ['zoom'], 6, 0, 11, 1],
          'fill-color': '#9cb366',
        },
      },
      {
        id: 'landuse_urban_green',
        type: 'fill',
        source: 'protomaps',
        'source-layer': 'landuse',
        filter: ['in', 'kind', 'allotments', 'village_green', 'playground'],
        layout: { visibility: 'visible' },
        paint: { 'fill-color': '#83a03e', 'fill-opacity': 0.7 },
      },
      {
        id: 'landuse_hospital',
        type: 'fill',
        source: 'protomaps',
        'source-layer': 'landuse',
        filter: ['==', 'kind', 'hospital'],
        layout: { visibility: 'none' },
        paint: { 'fill-color': '#e4dad9' },
      },
      {
        id: 'landuse_industrial',
        type: 'fill',
        source: 'protomaps',
        'source-layer': 'landuse',
        filter: ['==', 'kind', 'industrial'],
        layout: { visibility: 'none' },
        paint: { 'fill-color': '#d1dde1' },
      },
      {
        id: 'landuse_school',
        type: 'fill',
        source: 'protomaps',
        'source-layer': 'landuse',
        filter: ['in', 'kind', 'school', 'university', 'college'],
        layout: { visibility: 'none' },
        paint: { 'fill-color': '#e4ded7' },
      },
      {
        id: 'landuse_beach',
        type: 'fill',
        source: 'protomaps',
        'source-layer': 'landuse',
        filter: ['in', 'kind', 'beach'],
        paint: { 'fill-color': '#e8e4d0' },
      },
      {
        id: 'landuse_wood',
        type: 'fill',
        source: 'protomaps',
        'source-layer': 'landuse',
        filter: ['in', 'kind', 'wood'],
        layout: { visibility: 'visible' },
        paint: { 'fill-color': '#83a03e' },
      },
      {
        id: 'landuse_zoo',
        type: 'fill',
        source: 'protomaps',
        'source-layer': 'landuse',
        filter: ['in', 'kind', 'zoo'],
        layout: { visibility: 'visible' },
        paint: { 'fill-color': '#83a03e' },
      },
      {
        id: 'landuse_aerodrome',
        type: 'fill',
        source: 'protomaps',
        'source-layer': 'landuse',
        filter: ['in', 'kind', 'aerodrome'],
        layout: { visibility: 'none' },
        paint: { 'fill-color': '#dadbdf' },
      },
      {
        id: 'roads_runway',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        filter: ['==', 'kind_detail', 'runway'],
        layout: { visibility: 'visible' },
        paint: {
          'line-color': [
            'interpolate',
            ['linear'],
            ['zoom'],
            13,
            'hsl(55, 100%, 48%)',
            15,
            'hsl(55, 28%, 82%)',
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            10,
            0,
            12,
            4,
            18,
            30,
          ],
        },
      },
      {
        id: 'roads_taxiway',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        minzoom: 13,
        filter: ['==', 'kind_detail', 'taxiway'],
        paint: {
          'line-color': [
            'interpolate',
            ['linear'],
            ['zoom'],
            13,
            'hsl(55, 100%, 48%)',
            15,
            'hsl(55, 28%, 82%)',
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            13,
            0,
            13.5,
            1,
            15,
            6,
          ],
        },
      },
      {
        id: 'landuse_runway',
        type: 'fill',
        source: 'protomaps',
        'source-layer': 'landuse',
        filter: ['any', ['in', 'kind', 'runway', 'taxiway']],
        layout: { visibility: 'none' },
        paint: { 'fill-color': '#e9e9ed' },
      },
      {
        id: 'water',
        type: 'fill',
        source: 'protomaps',
        'source-layer': 'water',
        filter: ['==', '$type', 'Polygon'],
        paint: { 'fill-color': '#87b6a8' },
      },
      {
        id: 'water_stream',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'water',
        minzoom: 14,
        filter: ['in', 'kind', 'stream'],
        paint: { 'line-color': '#80deea', 'line-width': 0.5 },
      },
      {
        id: 'water_river',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'water',
        minzoom: 9,
        filter: ['in', 'kind', 'river'],
        layout: { visibility: 'none' },
        paint: {
          'line-color': '#80deea',
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            9,
            0,
            9.5,
            1,
            18,
            12,
          ],
        },
      },
      {
        id: 'landuse_pedestrian',
        type: 'fill',
        source: 'protomaps',
        'source-layer': 'landuse',
        filter: ['in', 'kind', 'pedestrian', 'dam'],
        layout: { visibility: 'visible' },
        paint: { 'fill-color': ['literal', '#e3e0d4'] },
      },
      {
        id: 'landuse_pier',
        type: 'fill',
        source: 'protomaps',
        'source-layer': 'landuse',
        filter: ['==', 'kind', 'pier'],
        paint: { 'fill-color': '#fcf6e9' },
      },
      {
        id: 'roads_tunnels_other_casing',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        filter: ['all', ['has', 'is_tunnel'], ['in', 'kind', 'other', 'path']],
        paint: {
          'line-color': '#e0e0e0',
          'line-gap-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            14,
            0,
            20,
            7,
          ],
        },
      },
      {
        id: 'roads_tunnels_minor_casing',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        filter: ['all', ['has', 'is_tunnel'], ['==', 'kind', 'minor_road']],
        paint: {
          'line-color': '#e0e0e0',
          'line-dasharray': [3, 2],
          'line-gap-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            11,
            0,
            12.5,
            0.5,
            15,
            2,
            18,
            11,
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            12,
            0,
            12.5,
            1,
          ],
        },
      },
      {
        id: 'roads_tunnels_link_casing',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        filter: ['all', ['has', 'is_tunnel'], ['has', 'is_link']],
        paint: {
          'line-color': '#e0e0e0',
          'line-dasharray': [3, 2],
          'line-gap-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            13,
            0,
            13.5,
            1,
            18,
            11,
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            12,
            0,
            12.5,
            1,
          ],
        },
      },
      {
        id: 'roads_tunnels_major_casing',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        filter: [
          'all',
          ['!has', 'is_tunnel'],
          ['!has', 'is_bridge'],
          ['==', 'kind', 'major_road'],
        ],
        layout: { visibility: 'none' },
        paint: {
          'line-color': '#e0e0e0',
          'line-dasharray': [3, 2],
          'line-gap-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            7,
            0,
            7.5,
            0.5,
            18,
            13,
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            9,
            0,
            9.5,
            1,
          ],
        },
      },
      {
        id: 'roads_tunnels_highway_casing',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        filter: [
          'all',
          ['!has', 'is_tunnel'],
          ['!has', 'is_bridge'],
          ['==', 'kind', 'highway'],
          ['!has', 'is_link'],
        ],
        layout: { visibility: 'visible' },
        paint: {
          'line-color': [
            'interpolate',
            ['linear'],
            ['zoom'],
            13,
            'hsl(55, 100%, 48%)',
            15,
            '#dedcc4',
          ],
          'line-dasharray': [6, 0.5],
          'line-gap-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            3,
            0,
            3.5,
            0.5,
            18,
            15,
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            7,
            0,
            7.5,
            0,
            20,
            0,
          ],
        },
      },
      {
        id: 'roads_tunnels_other',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        filter: ['all', ['has', 'is_tunnel'], ['in', 'kind', 'other', 'path']],
        paint: {
          'line-color': '#d5d5d5',
          'line-dasharray': [4.5, 0.5],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            14,
            0,
            20,
            7,
          ],
        },
      },
      {
        id: 'roads_tunnels_minor',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        filter: ['all', ['has', 'is_tunnel'], ['==', 'kind', 'minor_road']],
        paint: {
          'line-color': '#d5d5d5',
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            11,
            0,
            12.5,
            0.5,
            15,
            2,
            18,
            11,
          ],
        },
      },
      {
        id: 'roads_tunnels_link',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        filter: ['all', ['has', 'is_tunnel'], ['has', 'is_link']],
        paint: {
          'line-color': '#d5d5d5',
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            13,
            0,
            13.5,
            1,
            18,
            11,
          ],
        },
      },
      {
        id: 'roads_tunnels_major',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        filter: ['all', ['has', 'is_tunnel'], ['==', 'kind', 'major_road']],
        paint: {
          'line-color': '#d5d5d5',
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            6,
            0,
            12,
            1.6,
            15,
            3,
            18,
            13,
          ],
        },
      },
      {
        id: 'roads_tunnels_highway',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        filter: [
          'all',
          ['has', 'is_tunnel'],
          ['==', ['get', 'kind'], 'highway'],
          ['!', ['has', 'is_link']],
        ],
        layout: { visibility: 'visible' },
        paint: {
          'line-color': [
            'interpolate',
            ['linear'],
            ['zoom'],
            13,
            'hsl(55, 100%, 48%)',
            15,
            'hsl(55, 28%, 82%)',
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            3,
            0,
            6,
            1.1,
            12,
            1.6,
            15,
            5,
            18,
            15,
          ],
          'line-opacity': 0.5,
        },
      },
      {
        id: 'buildings-tallest',
        type: 'fill',
        source: 'protomaps',
        'source-layer': 'buildings',
        minzoom: 13,
        maxzoom: 15,
        filter: [
          'all',
          ['in', 'kind', 'building', 'building_part'],
          ['any', ['>=', 'height', 120], ['>=', 'levels', 40]],
        ],
        layout: { visibility: 'visible' },
        paint: {
          'fill-color': '#d44b21',
          'fill-opacity': 1,
        },
      },
      {
        id: 'buildings-all',
        type: 'fill',
        source: 'protomaps',
        'source-layer': 'buildings',
        minzoom: 15,
        filter: ['in', 'kind', 'building', 'building_part'],
        layout: { visibility: 'visible' },
        paint: {
          'fill-color': '#d44b21',
          'fill-opacity': 1,
        },
      },
      {
        id: 'roads_pier',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        filter: ['==', 'kind_detail', 'pier'],
        paint: {
          'line-color': '#e0e0e0',
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            12,
            0,
            12.5,
            0.5,
            20,
            16,
          ],
        },
      },
      {
        id: 'roads_minor_service_casing',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        minzoom: 13,
        filter: [
          'all',
          ['!has', 'is_tunnel'],
          ['!has', 'is_bridge'],
          ['==', 'kind', 'minor_road'],
          ['==', 'kind_detail', 'service'],
        ],
        paint: {
          'line-color': '#e0e0e0',
          'line-gap-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            13,
            0,
            18,
            8,
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            13,
            0,
            13.5,
            0.8,
          ],
        },
      },
      {
        id: 'roads_minor_casing',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        filter: [
          'all',
          ['!has', 'is_tunnel'],
          ['!has', 'is_bridge'],
          ['==', 'kind', 'minor_road'],
          ['!=', 'kind_detail', 'service'],
        ],
        layout: { visibility: 'none' },
        paint: {
          'line-color': [
            'interpolate',
            ['linear'],
            ['zoom'],
            13,
            'hsl(55, 100%, 48%)',
            15,
            '#dedcc4',
          ],
          'line-gap-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            11,
            0,
            12.5,
            0.5,
            15,
            2,
            18,
            11,
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            12,
            0,
            12.5,
            1,
          ],
        },
      },
      {
        id: 'roads_link_casing',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        minzoom: 13,
        filter: ['has', 'is_link'],
        layout: { visibility: 'none' },
        paint: {
          'line-color': '#e0e0e0',
          'line-gap-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            13,
            0,
            13.5,
            1,
            18,
            11,
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            13,
            0,
            13.5,
            1.5,
          ],
        },
      },
      {
        id: 'roads_major_casing_late',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        minzoom: 12,
        filter: [
          'all',
          ['!has', 'is_tunnel'],
          ['!has', 'is_bridge'],
          ['==', 'kind', 'major_road'],
        ],
        paint: {
          'line-color': '#e0e0e0',
          'line-gap-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            6,
            0,
            12,
            1.6,
            15,
            3,
            18,
            13,
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            9,
            0,
            9.5,
            1,
          ],
        },
      },
      {
        id: 'roads_highway_casing_late',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        minzoom: 12,
        filter: [
          'all',
          ['!has', 'is_tunnel'],
          ['!has', 'is_bridge'],
          ['==', 'kind', 'highway'],
          ['!has', 'is_link'],
        ],
        layout: { visibility: 'none' },
        paint: {
          'line-color': '#e0e0e0',
          'line-gap-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            3,
            0,
            3.5,
            0.5,
            18,
            15,
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            7,
            0,
            7.5,
            1,
            20,
            15,
          ],
        },
      },
      {
        id: 'roads_other',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        filter: [
          'all',
          ['!has', 'is_tunnel'],
          ['!has', 'is_bridge'],
          ['in', 'kind', 'other', 'path'],
          ['!=', 'kind_detail', 'pier'],
        ],
        paint: {
          'line-color': [
            'interpolate',
            ['linear'],
            ['zoom'],
            13,
            'hsl(55, 100%, 48%)',
            15,
            '#dedcc4',
          ],
          'line-dasharray': [3, 1],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            14,
            0,
            20,
            7,
          ],
        },
      },
      {
        id: 'roads_link',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        filter: ['has', 'is_link'],
        layout: { visibility: 'visible' },
        paint: {
          'line-color': [
            'interpolate',
            ['linear'],
            ['zoom'],
            13,
            'hsl(55, 100%, 48%)',
            15,
            '#dedcc4',
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            13,
            0,
            13.5,
            1,
            18,
            11,
          ],
        },
      },
      {
        id: 'roads_minor_service',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        filter: [
          'all',
          ['!has', 'is_tunnel'],
          ['!has', 'is_bridge'],
          ['==', 'kind', 'minor_road'],
          ['==', 'kind_detail', 'service'],
        ],
        paint: {
          'line-color': [
            'interpolate',
            ['linear'],
            ['zoom'],
            13,
            'hsl(55, 100%, 48%)',
            15,
            '#dedcc4',
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            13,
            0,
            18,
            8,
          ],
        },
      },
      {
        id: 'roads_minor',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        filter: [
          'all',
          ['!has', 'is_tunnel'],
          ['!has', 'is_bridge'],
          ['==', 'kind', 'minor_road'],
          ['!=', 'kind_detail', 'service'],
        ],
        layout: { visibility: 'visible' },
        paint: {
          'line-color': [
            'interpolate',
            ['linear'],
            ['zoom'],
            13,
            'hsl(55, 100%, 48%)',
            15,
            '#dedcc4',
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            11,
            0,
            12.5,
            0.5,
            15,
            2,
            18,
            11,
          ],
        },
      },
      {
        id: 'roads_major_casing_early',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        maxzoom: 12,
        filter: [
          'all',
          ['!has', 'is_tunnel'],
          ['!has', 'is_bridge'],
          ['==', 'kind', 'major_road'],
        ],
        layout: { visibility: 'none' },
        paint: {
          'line-color': [
            'interpolate',
            ['linear'],
            ['zoom'],
            13,
            'hsl(55, 100%, 48%)',
            15,
            '#dedcc4',
          ],
          'line-gap-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            7,
            0,
            7.5,
            0.5,
            18,
            13,
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            9,
            0,
            9.5,
            1,
          ],
        },
      },
      {
        id: 'roads_major',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        filter: [
          'all',
          ['!has', 'is_tunnel'],
          ['!has', 'is_bridge'],
          ['==', 'kind', 'major_road'],
        ],
        layout: { visibility: 'visible' },
        paint: {
          'line-color': [
            'interpolate',
            ['linear'],
            ['zoom'],
            13,
            'hsl(55, 100%, 48%)',
            15,
            '#dedcc4',
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            6,
            0,
            12,
            1.6,
            15,
            3,
            18,
            13,
          ],
        },
      },
      {
        id: 'roads_highway_casing_early',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        maxzoom: 12,
        filter: [
          'all',
          ['!has', 'is_tunnel'],
          ['!has', 'is_bridge'],
          ['==', 'kind', 'highway'],
          ['!has', 'is_link'],
        ],
        layout: { visibility: 'none' },
        paint: {
          'line-color': '#e0e0e0',
          'line-gap-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            3,
            0,
            3.5,
            0.5,
            18,
            15,
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            7,
            0,
            7.5,
            1,
          ],
        },
      },
      {
        id: 'roads_highway',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        filter: [
          'all',
          ['!has', 'is_tunnel'],
          ['!has', 'is_bridge'],
          ['==', 'kind', 'highway'],
          ['!has', 'is_link'],
        ],
        layout: { visibility: 'visible' },
        paint: {
          'line-color': [
            'interpolate',
            ['linear'],
            ['zoom'],
            13,
            'hsl(55, 100%, 48%)',
            15,
            '#dedcc4',
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.5],
            ['zoom'],
            3,
            0,
            6,
            0.75,
            12,
            2,
            18,
            32,
          ],
        },
      },
      {
        id: 'roads_rail-copy',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        minzoom: 13,
        filter: ['all', ['==', 'kind', 'rail'], ['!=', 'is_tunnel', true]],
        layout: { visibility: 'visible' },
        paint: {
          'line-color': ['literal', '#817774'],
          'line-width': [
            'interpolate',
            ['exponential', 1],
            ['zoom'],
            14,
            0.75,
            20,
            1,
          ],
          'line-opacity': 1,
        },
      },
      {
        id: 'roads_rail',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        minzoom: 13,
        filter: ['all', ['==', 'kind', 'rail'], ['!=', 'is_tunnel', true]],
        layout: { visibility: 'visible' },
        paint: {
          'line-dasharray': ['literal', [0.25, 10]],
          'line-color': ['literal', '#817774'],
          'line-width': [
            'interpolate',
            ['exponential', 1.25],
            ['zoom'],
            14,
            2,
            20,
            4,
          ],
          'line-opacity': 1,
        },
      },
      {
        id: 'boundaries_country',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'boundaries',
        filter: ['<=', 'kind_detail', 2],
        paint: {
          'line-color': '#adadad',
          'line-width': 0.7,
          'line-dasharray': [
            'step',
            ['zoom'],
            ['literal', [2, 0]],
            4,
            ['literal', [2, 1]],
          ],
        },
      },
      {
        id: 'boundaries',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'boundaries',
        filter: ['>', 'kind_detail', 2],
        paint: {
          'line-color': '#adadad',
          'line-width': 0.4,
          'line-dasharray': [
            'step',
            ['zoom'],
            ['literal', [2, 0]],
            4,
            ['literal', [2, 1]],
          ],
        },
      },
      {
        id: 'roads_bridges_other_casing',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        minzoom: 12,
        filter: ['all', ['has', 'is_bridge'], ['in', 'kind', 'other', 'path']],
        layout: { visibility: 'none' },
        paint: {
          'line-color': '#e0e0e0',
          'line-gap-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            14,
            0,
            20,
            7,
          ],
        },
      },
      {
        id: 'roads_bridges_link_casing',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        minzoom: 12,
        filter: ['all', ['has', 'is_bridge'], ['has', 'is_link']],
        layout: { visibility: 'none' },
        paint: {
          'line-color': '#e0e0e0',
          'line-gap-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            13,
            0,
            13.5,
            1,
            18,
            11,
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            12,
            0,
            12.5,
            1.5,
          ],
        },
      },
      {
        id: 'roads_bridges_minor_casing',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        minzoom: 12,
        filter: ['all', ['has', 'is_bridge'], ['==', 'kind', 'minor_road']],
        layout: { visibility: 'none' },
        paint: {
          'line-color': '#e0e0e0',
          'line-gap-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            11,
            0,
            12.5,
            0.5,
            15,
            2,
            18,
            11,
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            13,
            0,
            13.5,
            0.8,
          ],
        },
      },
      {
        id: 'roads_bridges_major_casing',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        minzoom: 12,
        filter: ['all', ['has', 'is_bridge'], ['==', 'kind', 'major_road']],
        layout: { visibility: 'none' },
        paint: {
          'line-color': '#e0e0e0',
          'line-gap-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            7,
            0,
            7.5,
            0.5,
            18,
            10,
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            9,
            0,
            9.5,
            1.5,
          ],
        },
      },
      {
        id: 'roads_bridges_other',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        minzoom: 12,
        filter: ['all', ['has', 'is_bridge'], ['in', 'kind', 'other', 'path']],
        layout: { visibility: 'none' },
        paint: {
          'line-color': '#ebebeb',
          'line-dasharray': [2, 1],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            14,
            0,
            20,
            7,
          ],
        },
      },
      {
        id: 'roads_bridges_minor',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        minzoom: 12,
        filter: ['all', ['has', 'is_bridge'], ['==', 'kind', 'minor_road']],
        layout: { visibility: 'none' },
        paint: {
          'line-color': '#ffffff',
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            11,
            0,
            12.5,
            0.5,
            15,
            2,
            18,
            11,
          ],
        },
      },
      {
        id: 'roads_bridges_link',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        minzoom: 12,
        filter: ['all', ['has', 'is_bridge'], ['has', 'is_link']],
        layout: { visibility: 'none' },
        paint: {
          'line-color': '#ffffff',
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            13,
            0,
            13.5,
            1,
            18,
            11,
          ],
        },
      },
      {
        id: 'roads_bridges_major',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        minzoom: 12,
        filter: ['all', ['has', 'is_bridge'], ['==', 'kind', 'major_road']],
        layout: { visibility: 'none' },
        paint: {
          'line-color': '#f5f5f5',
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            6,
            0,
            12,
            1.6,
            15,
            3,
            18,
            13,
          ],
        },
      },
      {
        id: 'roads_bridges_highway_casing',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        minzoom: 12,
        filter: [
          'all',
          ['has', 'is_bridge'],
          ['==', 'kind', 'highway'],
          ['!has', 'is_link'],
        ],
        layout: { visibility: 'none' },
        paint: {
          'line-color': '#e0e0e0',
          'line-gap-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            3,
            0,
            3.5,
            0.5,
            18,
            15,
          ],
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            7,
            0,
            7.5,
            1,
            20,
            15,
          ],
        },
      },
      {
        id: 'roads_bridges_highway',
        type: 'line',
        source: 'protomaps',
        'source-layer': 'roads',
        filter: [
          'all',
          ['has', 'is_bridge'],
          ['==', 'kind', 'highway'],
          ['!has', 'is_link'],
        ],
        layout: { visibility: 'none' },
        paint: {
          'line-color': '#ffffff',
          'line-width': [
            'interpolate',
            ['exponential', 1.6],
            ['zoom'],
            3,
            0,
            6,
            1.1,
            12,
            1.6,
            15,
            5,
            18,
            15,
          ],
        },
      },
      {
        id: 'address_label',
        type: 'symbol',
        source: 'protomaps',
        'source-layer': 'buildings',
        minzoom: 18,
        filter: ['==', 'kind', 'address'],
        layout: {
          'symbol-placement': 'point',
          'text-font': ['News Gothic Std Oblique'],
          'text-field': ['get', 'addr_housenumber'],
          'text-size': 12,
          visibility: 'none',
        },
        paint: {
          'text-color': '#91888b',
          'text-halo-color': '#ffffff',
          'text-halo-width': 1,
        },
      },
      {
        id: 'water_waterway_label',
        type: 'symbol',
        source: 'protomaps',
        'source-layer': 'water',
        minzoom: 13,
        filter: ['in', 'kind', 'river', 'stream'],
        layout: {
          'symbol-placement': 'line',
          'text-font': ['Spectral SC Medium'],
          'text-field': [
            'case',
            [
              'all',
              ['any', ['has', 'name'], ['has', 'pgf:name']],
              ['!', ['any', ['has', 'name2'], ['has', 'pgf:name2']]],
              ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
            ],
            [
              'case',
              ['has', 'script'],
              [
                'case',
                [
                  'any',
                  ['is-supported-script', ['get', 'name']],
                  ['has', 'pgf:name'],
                ],
                [
                  'format',
                  ['coalesce', ['get', 'name:en'], ['get', 'name:en']],
                  {},
                  '\n',
                  {},
                  [
                    'case',
                    [
                      'all',
                      ['!', ['has', 'name:en']],
                      ['has', 'name:en'],
                      ['!', ['has', 'script']],
                    ],
                    '',
                    ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  ],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                ['get', 'name:en'],
              ],
              [
                'format',
                [
                  'coalesce',
                  ['get', 'name:en'],
                  ['get', 'pgf:name'],
                  ['get', 'name'],
                ],
                {},
              ],
            ],
            [
              'all',
              ['any', ['has', 'name'], ['has', 'pgf:name']],
              ['any', ['has', 'name2'], ['has', 'pgf:name2']],
              ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
            ],
            [
              'case',
              ['all', ['has', 'script'], ['has', 'script2']],
              [
                'format',
                ['get', 'name:en'],
                {},
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script2'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
              ],
              [
                'case',
                ['has', 'script2'],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name2'],
                    ['get', 'name2'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
              ],
            ],
            [
              'case',
              [
                'all',
                ['has', 'script'],
                ['has', 'script2'],
                ['has', 'script3'],
              ],
              [
                'format',
                ['get', 'name:en'],
                {},
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script2'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script3'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
              ],
              [
                'case',
                ['!', ['has', 'script']],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                ['!', ['has', 'script2']],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name2'],
                    ['get', 'name2'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name3'],
                    ['get', 'name3'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
              ],
            ],
          ],
          'text-size': 12,
          'text-letter-spacing': 1,
          'text-transform': 'none',
        },
        paint: { 'text-halo-width': 1, 'text-color': '#0b1804' },
      },
      {
        id: 'poi_label_park',
        type: 'symbol',
        source: 'protomaps',
        'source-layer': 'pois',
        filter: [
          'all',
          [
            'in',
            ['get', 'kind'],
            ['literal', ['beach', 'forest', 'park', 'cemetery']],
          ],
          ['>=', ['zoom'], ['+', ['get', 'min_zoom'], 0]],
        ],
        layout: {
          'text-font': ['Spectral SC Light'],
          'text-field': [
            'case',
            [
              'all',
              ['any', ['has', 'name'], ['has', 'pgf:name']],
              ['!', ['any', ['has', 'name2'], ['has', 'pgf:name2']]],
              ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
            ],
            [
              'case',
              ['has', 'script'],
              [
                'case',
                [
                  'any',
                  ['is-supported-script', ['get', 'name']],
                  ['has', 'pgf:name'],
                ],
                [
                  'format',
                  ['coalesce', ['get', 'name:en'], ['get', 'name:en']],
                  {},
                  '\n',
                  {},
                  [
                    'case',
                    [
                      'all',
                      ['!', ['has', 'name:en']],
                      ['has', 'name:en'],
                      ['!', ['has', 'script']],
                    ],
                    '',
                    ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  ],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                ['get', 'name:en'],
              ],
              [
                'format',
                [
                  'coalesce',
                  ['get', 'name:en'],
                  ['get', 'pgf:name'],
                  ['get', 'name'],
                ],
                {},
              ],
            ],
            [
              'all',
              ['any', ['has', 'name'], ['has', 'pgf:name']],
              ['any', ['has', 'name2'], ['has', 'pgf:name2']],
              ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
            ],
            [
              'case',
              ['all', ['has', 'script'], ['has', 'script2']],
              [
                'format',
                ['get', 'name:en'],
                {},
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script2'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
              ],
              [
                'case',
                ['has', 'script2'],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name2'],
                    ['get', 'name2'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
              ],
            ],
            [
              'case',
              [
                'all',
                ['has', 'script'],
                ['has', 'script2'],
                ['has', 'script3'],
              ],
              [
                'format',
                ['get', 'name:en'],
                {},
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script2'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script3'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
              ],
              [
                'case',
                ['!', ['has', 'script']],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                ['!', ['has', 'script2']],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name2'],
                    ['get', 'name2'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name3'],
                    ['get', 'name3'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
              ],
            ],
          ],
          'text-size': ['interpolate', ['linear'], ['zoom'], 3, 12, 18, 16],
          'text-letter-spacing': 0,
          'text-max-width': 9,
          'text-transform': 'none',
          'symbol-z-order': 'auto',
        },
        paint: {
          'text-halo-width': 0.9,
          'text-color': 'rgba(43, 49, 41, 1)',
          'text-halo-color': 'hsl(41, 76%, 95%)',
          'text-halo-blur': 0.1,
        },
      },
      {
        id: 'roads_oneway',
        type: 'symbol',
        source: 'protomaps',
        'source-layer': 'roads',
        minzoom: 16,
        filter: ['==', ['get', 'oneway'], 'yes'],
        layout: {
          'symbol-placement': 'line',
          'icon-image': 'arrow',
          'icon-rotate': 90,
          'symbol-spacing': 100,
        },
      },
      {
        id: 'roads_labels_minor',
        type: 'symbol',
        source: 'protomaps',
        'source-layer': 'roads',
        minzoom: 15,
        filter: ['in', 'kind', 'minor_road', 'other', 'path'],
        layout: {
          'symbol-sort-key': ['get', 'min_zoom'],
          'symbol-placement': 'line',
          'text-font': ['Oswald Light'],
          'text-field': [
            'case',
            [
              'all',
              ['any', ['has', 'name'], ['has', 'pgf:name']],
              ['!', ['any', ['has', 'name2'], ['has', 'pgf:name2']]],
              ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
            ],
            [
              'case',
              ['has', 'script'],
              [
                'case',
                [
                  'any',
                  ['is-supported-script', ['get', 'name']],
                  ['has', 'pgf:name'],
                ],
                [
                  'format',
                  ['coalesce', ['get', 'name:en'], ['get', 'name:en']],
                  {},
                  '\n',
                  {},
                  [
                    'case',
                    [
                      'all',
                      ['!', ['has', 'name:en']],
                      ['has', 'name:en'],
                      ['!', ['has', 'script']],
                    ],
                    '',
                    ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  ],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                ['get', 'name:en'],
              ],
              [
                'format',
                [
                  'coalesce',
                  ['get', 'name:en'],
                  ['get', 'pgf:name'],
                  ['get', 'name'],
                ],
                {},
              ],
            ],
            [
              'all',
              ['any', ['has', 'name'], ['has', 'pgf:name']],
              ['any', ['has', 'name2'], ['has', 'pgf:name2']],
              ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
            ],
            [
              'case',
              ['all', ['has', 'script'], ['has', 'script2']],
              [
                'format',
                ['get', 'name:en'],
                {},
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script2'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
              ],
              [
                'case',
                ['has', 'script2'],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name2'],
                    ['get', 'name2'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
              ],
            ],
            [
              'case',
              [
                'all',
                ['has', 'script'],
                ['has', 'script2'],
                ['has', 'script3'],
              ],
              [
                'format',
                ['get', 'name:en'],
                {},
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script2'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script3'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
              ],
              [
                'case',
                ['!', ['has', 'script']],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                ['!', ['has', 'script2']],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name2'],
                    ['get', 'name2'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name3'],
                    ['get', 'name3'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
              ],
            ],
          ],
          'text-transform': 'uppercase',
          'text-letter-spacing': 0.2,
          'text-size': 9,
        },
        paint: {
          'text-color': '#0b1804',
          'text-halo-color': '#ffffff',
          'text-halo-width': 0,
        },
      },
      {
        id: 'water_label_ocean',
        type: 'symbol',
        source: 'protomaps',
        'source-layer': 'water',
        filter: ['in', 'kind', 'sea', 'ocean', 'bay', 'strait', 'fjord'],
        layout: {
          'text-font': ['News Gothic Std Oblique'],
          'text-field': [
            'case',
            [
              'all',
              ['any', ['has', 'name'], ['has', 'pgf:name']],
              ['!', ['any', ['has', 'name2'], ['has', 'pgf:name2']]],
              ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
            ],
            [
              'case',
              ['has', 'script'],
              [
                'case',
                [
                  'any',
                  ['is-supported-script', ['get', 'name']],
                  ['has', 'pgf:name'],
                ],
                [
                  'format',
                  ['coalesce', ['get', 'name:en'], ['get', 'name:en']],
                  {},
                  '\n',
                  {},
                  [
                    'case',
                    [
                      'all',
                      ['!', ['has', 'name:en']],
                      ['has', 'name:en'],
                      ['!', ['has', 'script']],
                    ],
                    '',
                    ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  ],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                ['get', 'name:en'],
              ],
              [
                'format',
                [
                  'coalesce',
                  ['get', 'name:en'],
                  ['get', 'pgf:name'],
                  ['get', 'name'],
                ],
                {},
              ],
            ],
            [
              'all',
              ['any', ['has', 'name'], ['has', 'pgf:name']],
              ['any', ['has', 'name2'], ['has', 'pgf:name2']],
              ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
            ],
            [
              'case',
              ['all', ['has', 'script'], ['has', 'script2']],
              [
                'format',
                ['get', 'name:en'],
                {},
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script2'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
              ],
              [
                'case',
                ['has', 'script2'],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name2'],
                    ['get', 'name2'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
              ],
            ],
            [
              'case',
              [
                'all',
                ['has', 'script'],
                ['has', 'script2'],
                ['has', 'script3'],
              ],
              [
                'format',
                ['get', 'name:en'],
                {},
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script2'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script3'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
              ],
              [
                'case',
                ['!', ['has', 'script']],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                ['!', ['has', 'script2']],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name2'],
                    ['get', 'name2'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name3'],
                    ['get', 'name3'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
              ],
            ],
          ],
          'text-size': ['interpolate', ['linear'], ['zoom'], 3, 10, 10, 12],
          'text-letter-spacing': 0.1,
          'text-max-width': 9,
          'text-transform': 'uppercase',
        },
        paint: { 'text-halo-width': 1, 'text-color': 'rgba(43, 49, 41, 1)' },
      },
      {
        id: 'earth_label_islands',
        type: 'symbol',
        source: 'protomaps',
        'source-layer': 'earth',
        filter: ['in', 'kind', 'island'],
        layout: {
          'text-font': ['News Gothic Std Medium'],
          'text-field': [
            'case',
            [
              'all',
              ['any', ['has', 'name'], ['has', 'pgf:name']],
              ['!', ['any', ['has', 'name2'], ['has', 'pgf:name2']]],
              ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
            ],
            [
              'case',
              ['has', 'script'],
              [
                'case',
                [
                  'any',
                  ['is-supported-script', ['get', 'name']],
                  ['has', 'pgf:name'],
                ],
                [
                  'format',
                  ['coalesce', ['get', 'name:en'], ['get', 'name:en']],
                  {},
                  '\n',
                  {},
                  [
                    'case',
                    [
                      'all',
                      ['!', ['has', 'name:en']],
                      ['has', 'name:en'],
                      ['!', ['has', 'script']],
                    ],
                    '',
                    ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  ],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                ['get', 'name:en'],
              ],
              [
                'format',
                [
                  'coalesce',
                  ['get', 'name:en'],
                  ['get', 'pgf:name'],
                  ['get', 'name'],
                ],
                {},
              ],
            ],
            [
              'all',
              ['any', ['has', 'name'], ['has', 'pgf:name']],
              ['any', ['has', 'name2'], ['has', 'pgf:name2']],
              ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
            ],
            [
              'case',
              ['all', ['has', 'script'], ['has', 'script2']],
              [
                'format',
                ['get', 'name:en'],
                {},
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script2'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
              ],
              [
                'case',
                ['has', 'script2'],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name2'],
                    ['get', 'name2'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
              ],
            ],
            [
              'case',
              [
                'all',
                ['has', 'script'],
                ['has', 'script2'],
                ['has', 'script3'],
              ],
              [
                'format',
                ['get', 'name:en'],
                {},
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script2'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script3'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
              ],
              [
                'case',
                ['!', ['has', 'script']],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                ['!', ['has', 'script2']],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name2'],
                    ['get', 'name2'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name3'],
                    ['get', 'name3'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
              ],
            ],
          ],
          'text-size': [
            'interpolate',
            ['exponential', 1],
            ['zoom'],
            10,
            11,
            18,
            16,
          ],
          'text-letter-spacing': 0.1,
          'text-max-width': 8,
          visibility: 'visible',
        },
        paint: {
          'text-color': '#2f2927',
          'text-halo-color': '#fcf6e9',
          'text-halo-width': 1,
          'text-halo-blur': 1,
        },
      },
      {
        id: 'water_label_lakes',
        type: 'symbol',
        source: 'protomaps',
        'source-layer': 'water',
        filter: ['in', 'kind', 'lake', 'water'],
        layout: {
          'text-font': ['Spectral SC Light'],
          'text-field': [
            'case',
            [
              'all',
              ['any', ['has', 'name'], ['has', 'pgf:name']],
              ['!', ['any', ['has', 'name2'], ['has', 'pgf:name2']]],
              ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
            ],
            [
              'case',
              ['has', 'script'],
              [
                'case',
                [
                  'any',
                  ['is-supported-script', ['get', 'name']],
                  ['has', 'pgf:name'],
                ],
                [
                  'format',
                  ['coalesce', ['get', 'name:en'], ['get', 'name:en']],
                  {},
                  '\n',
                  {},
                  [
                    'case',
                    [
                      'all',
                      ['!', ['has', 'name:en']],
                      ['has', 'name:en'],
                      ['!', ['has', 'script']],
                    ],
                    '',
                    ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  ],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                ['get', 'name:en'],
              ],
              [
                'format',
                [
                  'coalesce',
                  ['get', 'name:en'],
                  ['get', 'pgf:name'],
                  ['get', 'name'],
                ],
                {},
              ],
            ],
            [
              'all',
              ['any', ['has', 'name'], ['has', 'pgf:name']],
              ['any', ['has', 'name2'], ['has', 'pgf:name2']],
              ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
            ],
            [
              'case',
              ['all', ['has', 'script'], ['has', 'script2']],
              [
                'format',
                ['get', 'name:en'],
                {},
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script2'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
              ],
              [
                'case',
                ['has', 'script2'],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name2'],
                    ['get', 'name2'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
              ],
            ],
            [
              'case',
              [
                'all',
                ['has', 'script'],
                ['has', 'script2'],
                ['has', 'script3'],
              ],
              [
                'format',
                ['get', 'name:en'],
                {},
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script2'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script3'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
              ],
              [
                'case',
                ['!', ['has', 'script']],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                ['!', ['has', 'script2']],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name2'],
                    ['get', 'name2'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name3'],
                    ['get', 'name3'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
              ],
            ],
          ],
          'text-size': [
            'interpolate',
            ['exponential', 1],
            ['zoom'],
            13,
            14,
            18,
            18,
          ],
          'text-letter-spacing': 0.1,
          'text-max-width': 9,
        },
        paint: { 'text-color': '#0b1804', 'text-halo-width': 1 },
      },
      {
        id: 'roads_labels_major',
        type: 'symbol',
        source: 'protomaps',
        'source-layer': 'roads',
        minzoom: 12,
        filter: ['in', 'kind', 'highway', 'major_road'],
        layout: {
          'symbol-sort-key': ['get', 'min_zoom'],
          'symbol-placement': 'line',
          'text-font': ['Oswald Light'],
          'text-field': [
            'case',
            [
              'all',
              ['any', ['has', 'name'], ['has', 'pgf:name']],
              ['!', ['any', ['has', 'name2'], ['has', 'pgf:name2']]],
              ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
            ],
            [
              'case',
              ['has', 'script'],
              [
                'case',
                [
                  'any',
                  ['is-supported-script', ['get', 'name']],
                  ['has', 'pgf:name'],
                ],
                [
                  'format',
                  ['coalesce', ['get', 'name:en'], ['get', 'name:en']],
                  {},
                  '\n',
                  {},
                  [
                    'case',
                    [
                      'all',
                      ['!', ['has', 'name:en']],
                      ['has', 'name:en'],
                      ['!', ['has', 'script']],
                    ],
                    '',
                    ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  ],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                ['get', 'name:en'],
              ],
              [
                'format',
                [
                  'coalesce',
                  ['get', 'name:en'],
                  ['get', 'pgf:name'],
                  ['get', 'name'],
                ],
                {},
              ],
            ],
            [
              'all',
              ['any', ['has', 'name'], ['has', 'pgf:name']],
              ['any', ['has', 'name2'], ['has', 'pgf:name2']],
              ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
            ],
            [
              'case',
              ['all', ['has', 'script'], ['has', 'script2']],
              [
                'format',
                ['get', 'name:en'],
                {},
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script2'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
              ],
              [
                'case',
                ['has', 'script2'],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name2'],
                    ['get', 'name2'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
              ],
            ],
            [
              'case',
              [
                'all',
                ['has', 'script'],
                ['has', 'script2'],
                ['has', 'script3'],
              ],
              [
                'format',
                ['get', 'name:en'],
                {},
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script2'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script3'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
              ],
              [
                'case',
                ['!', ['has', 'script']],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                ['!', ['has', 'script2']],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name2'],
                    ['get', 'name2'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name3'],
                    ['get', 'name3'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
              ],
            ],
          ],
          'text-size': [
            'interpolate',
            ['exponential', 1],
            ['zoom'],
            15,
            [
              'match',
              ['get', 'kind'],
              'major_road',
              10,
              'primary',
              10,
              'secondary',
              10,
              'tertiary',
              10,
              'trunk',
              10,
              ['trunk_link', 'primary_link', 'secondary_link', 'tertiary_link'],
              8,
              'pedestrian',
              8,
              'street',
              8,
              'street_limited',
              8,
              6,
            ],
            20,
            [
              'match',
              ['get', 'class'],
              'motorway',
              16,
              'primary',
              16,
              'secondary',
              16,
              'tertiary',
              16,
              'trunk',
              16,
              ['trunk_link', 'primary_link', 'secondary_link', 'tertiary_link'],
              14,
              'pedestrian',
              14,
              'street',
              14,
              'street_limited',
              14,
              12,
            ],
          ],
          visibility: 'visible',
          'text-transform': 'uppercase',
          'text-letter-spacing': 0.3,
        },
        paint: {
          'text-color': '#0b1804',
          'text-halo-color': '#ffffff',
          'text-halo-width': 0,
        },
      },
      {
        id: 'pois',
        type: 'symbol',
        source: 'protomaps',
        'source-layer': 'pois',
        filter: [
          'all',
          [
            'in',
            ['get', 'kind'],
            [
              'literal',
              [
                'beach',
                'forest',
                'marina',
                'park',
                'peak',
                'zoo',
                'garden',
                'bench',
                'aerodrome',
                'station',
                'bus_stop',
                'ferry_terminal',
                'stadium',
                'university',
                'library',
                'school',
                'animal',
                'toilets',
                'drinking_water',
              ],
            ],
          ],
          ['>=', ['zoom'], ['+', ['get', 'min_zoom'], 0]],
        ],
        layout: {
          'icon-image': [
            'match',
            ['get', 'kind'],
            'station',
            'train_station',
            ['get', 'kind'],
          ],
          'text-font': ['News Gothic Std Medium'],
          'text-justify': 'auto',
          'text-field': [
            'case',
            [
              'all',
              ['any', ['has', 'name'], ['has', 'pgf:name']],
              ['!', ['any', ['has', 'name2'], ['has', 'pgf:name2']]],
              ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
            ],
            [
              'case',
              ['has', 'script'],
              [
                'case',
                [
                  'any',
                  ['is-supported-script', ['get', 'name']],
                  ['has', 'pgf:name'],
                ],
                [
                  'format',
                  ['coalesce', ['get', 'name:en'], ['get', 'name:en']],
                  {},
                  '\n',
                  {},
                  [
                    'case',
                    [
                      'all',
                      ['!', ['has', 'name:en']],
                      ['has', 'name:en'],
                      ['!', ['has', 'script']],
                    ],
                    '',
                    ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  ],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                ['get', 'name:en'],
              ],
              [
                'format',
                [
                  'coalesce',
                  ['get', 'name:en'],
                  ['get', 'pgf:name'],
                  ['get', 'name'],
                ],
                {},
              ],
            ],
            [
              'all',
              ['any', ['has', 'name'], ['has', 'pgf:name']],
              ['any', ['has', 'name2'], ['has', 'pgf:name2']],
              ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
            ],
            [
              'case',
              ['all', ['has', 'script'], ['has', 'script2']],
              [
                'format',
                ['get', 'name:en'],
                {},
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script2'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
              ],
              [
                'case',
                ['has', 'script2'],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name2'],
                    ['get', 'name2'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
              ],
            ],
            [
              'case',
              [
                'all',
                ['has', 'script'],
                ['has', 'script2'],
                ['has', 'script3'],
              ],
              [
                'format',
                ['get', 'name:en'],
                {},
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script2'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script3'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
              ],
              [
                'case',
                ['!', ['has', 'script']],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                ['!', ['has', 'script2']],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name2'],
                    ['get', 'name2'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name3'],
                    ['get', 'name3'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
              ],
            ],
          ],
          'text-size': ['interpolate', ['linear'], ['zoom'], 17, 10, 19, 16],
          'text-max-width': 8,
          'text-offset': [1.1, 0],
          'text-variable-anchor': ['left', 'right'],
          visibility: 'none',
        },
        paint: {
          'text-color': [
            'case',
            [
              'in',
              ['get', 'kind'],
              [
                'literal',
                [
                  'beach',
                  'forest',
                  'marina',
                  'park',
                  'peak',
                  'zoo',
                  'garden',
                  'bench',
                ],
              ],
            ],
            '#20834D',
            [
              'in',
              ['get', 'kind'],
              [
                'literal',
                ['aerodrome', 'station', 'bus_stop', 'ferry_terminal'],
              ],
            ],
            '#315BCF',
            [
              'in',
              ['get', 'kind'],
              [
                'literal',
                [
                  'stadium',
                  'university',
                  'library',
                  'school',
                  'animal',
                  'toilets',
                  'drinking_water',
                ],
              ],
            ],
            '#6A5B8F',
            '#e2dfda',
          ],
          'text-halo-color': '#e2dfda',
          'text-halo-width': 1,
        },
      },
      {
        id: 'places_subplace',
        type: 'symbol',
        source: 'protomaps',
        'source-layer': 'places',
        minzoom: 11,
        filter: ['in', 'kind', 'neighbourhood', 'macrohood'],
        layout: {
          'symbol-sort-key': [
            'case',
            ['has', 'sort_key'],
            ['get', 'sort_key'],
            ['get', 'min_zoom'],
          ],
          'text-field': [
            'case',
            [
              'all',
              ['any', ['has', 'name'], ['has', 'pgf:name']],
              ['!', ['any', ['has', 'name2'], ['has', 'pgf:name2']]],
              ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
            ],
            [
              'case',
              ['has', 'script'],
              [
                'case',
                [
                  'any',
                  ['is-supported-script', ['get', 'name']],
                  ['has', 'pgf:name'],
                ],
                [
                  'format',
                  ['coalesce', ['get', 'name:en'], ['get', 'name:en']],
                  {},
                  '\n',
                  {},
                  [
                    'case',
                    [
                      'all',
                      ['!', ['has', 'name:en']],
                      ['has', 'name:en'],
                      ['!', ['has', 'script']],
                    ],
                    '',
                    ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  ],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                ['get', 'name:en'],
              ],
              [
                'format',
                [
                  'coalesce',
                  ['get', 'name:en'],
                  ['get', 'pgf:name'],
                  ['get', 'name'],
                ],
                {},
              ],
            ],
            [
              'all',
              ['any', ['has', 'name'], ['has', 'pgf:name']],
              ['any', ['has', 'name2'], ['has', 'pgf:name2']],
              ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
            ],
            [
              'case',
              ['all', ['has', 'script'], ['has', 'script2']],
              [
                'format',
                ['get', 'name:en'],
                {},
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script2'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
              ],
              [
                'case',
                ['has', 'script2'],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name2'],
                    ['get', 'name2'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
              ],
            ],
            [
              'case',
              [
                'all',
                ['has', 'script'],
                ['has', 'script2'],
                ['has', 'script3'],
              ],
              [
                'format',
                ['get', 'name:en'],
                {},
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script2'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script3'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
              ],
              [
                'case',
                ['!', ['has', 'script']],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                ['!', ['has', 'script2']],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name2'],
                    ['get', 'name2'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name3'],
                    ['get', 'name3'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
              ],
            ],
          ],
          'text-font': ['News Gothic Std Medium'],
          'text-max-width': 7,
          'text-letter-spacing': 0.1,
          'text-padding': [
            'interpolate',
            ['linear'],
            ['zoom'],
            5,
            2,
            8,
            4,
            12,
            18,
            15,
            20,
          ],
          'text-size': [
            'interpolate',
            ['exponential', 1],
            ['zoom'],
            12,
            11,
            16,
            16,
          ],
          'text-transform': 'uppercase',
          visibility: 'visible',
        },
        paint: {
          'text-color': '#0b1804',
          'text-halo-color': '#fcf6e9',
          'text-halo-width': 1,
        },
      },
      {
        id: 'places_region',
        type: 'symbol',
        source: 'protomaps',
        'source-layer': 'places',
        filter: ['==', 'kind', 'region'],
        layout: {
          'symbol-sort-key': ['get', 'sort_key'],
          'text-field': [
            'step',
            ['zoom'],
            ['coalesce', ['get', 'ref:en'], ['get', 'ref']],
            6,
            [
              'case',
              [
                'all',
                ['any', ['has', 'name'], ['has', 'pgf:name']],
                ['!', ['any', ['has', 'name2'], ['has', 'pgf:name2']]],
                ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
              ],
              [
                'case',
                ['has', 'script'],
                [
                  'case',
                  [
                    'any',
                    ['is-supported-script', ['get', 'name']],
                    ['has', 'pgf:name'],
                  ],
                  [
                    'format',
                    ['coalesce', ['get', 'name:en'], ['get', 'name:en']],
                    {},
                    '\n',
                    {},
                    [
                      'case',
                      [
                        'all',
                        ['!', ['has', 'name:en']],
                        ['has', 'name:en'],
                        ['!', ['has', 'script']],
                      ],
                      '',
                      ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                    ],
                    {
                      'text-font': [
                        'case',
                        ['==', ['get', 'script'], 'Devanagari'],
                        ['literal', ['Noto Sans Devanagari Regular v1']],
                        ['literal', ['News Gothic Std Medium']],
                      ],
                    },
                  ],
                  ['get', 'name:en'],
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                ],
              ],
              [
                'all',
                ['any', ['has', 'name'], ['has', 'pgf:name']],
                ['any', ['has', 'name2'], ['has', 'pgf:name2']],
                ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
              ],
              [
                'case',
                ['all', ['has', 'script'], ['has', 'script2']],
                [
                  'format',
                  ['get', 'name:en'],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'case',
                  ['has', 'script2'],
                  [
                    'format',
                    [
                      'coalesce',
                      ['get', 'name:en'],
                      ['get', 'pgf:name'],
                      ['get', 'name'],
                    ],
                    {},
                    '\n',
                    {},
                    ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                    {
                      'text-font': [
                        'case',
                        ['==', ['get', 'script2'], 'Devanagari'],
                        ['literal', ['Noto Sans Devanagari Regular v1']],
                        ['literal', ['News Gothic Std Medium']],
                      ],
                    },
                  ],
                  [
                    'format',
                    [
                      'coalesce',
                      ['get', 'name:en'],
                      ['get', 'pgf:name2'],
                      ['get', 'name2'],
                    ],
                    {},
                    '\n',
                    {},
                    ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                    {
                      'text-font': [
                        'case',
                        ['==', ['get', 'script'], 'Devanagari'],
                        ['literal', ['Noto Sans Devanagari Regular v1']],
                        ['literal', ['News Gothic Std Medium']],
                      ],
                    },
                  ],
                ],
              ],
              [
                'case',
                [
                  'all',
                  ['has', 'script'],
                  ['has', 'script2'],
                  ['has', 'script3'],
                ],
                [
                  'format',
                  ['get', 'name:en'],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'case',
                  ['!', ['has', 'script']],
                  [
                    'format',
                    [
                      'coalesce',
                      ['get', 'name:en'],
                      ['get', 'pgf:name'],
                      ['get', 'name'],
                    ],
                    {},
                    '\n',
                    {},
                    ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                    {
                      'text-font': [
                        'case',
                        ['==', ['get', 'script2'], 'Devanagari'],
                        ['literal', ['Noto Sans Devanagari Regular v1']],
                        ['literal', ['News Gothic Std Medium']],
                      ],
                    },
                    '\n',
                    {},
                    ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                    {
                      'text-font': [
                        'case',
                        ['==', ['get', 'script3'], 'Devanagari'],
                        ['literal', ['Noto Sans Devanagari Regular v1']],
                        ['literal', ['News Gothic Std Medium']],
                      ],
                    },
                  ],
                  ['!', ['has', 'script2']],
                  [
                    'format',
                    [
                      'coalesce',
                      ['get', 'name:en'],
                      ['get', 'pgf:name2'],
                      ['get', 'name2'],
                    ],
                    {},
                    '\n',
                    {},
                    ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                    {
                      'text-font': [
                        'case',
                        ['==', ['get', 'script'], 'Devanagari'],
                        ['literal', ['Noto Sans Devanagari Regular v1']],
                        ['literal', ['News Gothic Std Medium']],
                      ],
                    },
                    '\n',
                    {},
                    ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                    {
                      'text-font': [
                        'case',
                        ['==', ['get', 'script3'], 'Devanagari'],
                        ['literal', ['Noto Sans Devanagari Regular v1']],
                        ['literal', ['News Gothic Std Medium']],
                      ],
                    },
                  ],
                  [
                    'format',
                    [
                      'coalesce',
                      ['get', 'name:en'],
                      ['get', 'pgf:name3'],
                      ['get', 'name3'],
                    ],
                    {},
                    '\n',
                    {},
                    ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                    {
                      'text-font': [
                        'case',
                        ['==', ['get', 'script'], 'Devanagari'],
                        ['literal', ['Noto Sans Devanagari Regular v1']],
                        ['literal', ['News Gothic Std Medium']],
                      ],
                    },
                    '\n',
                    {},
                    ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                    {
                      'text-font': [
                        'case',
                        ['==', ['get', 'script2'], 'Devanagari'],
                        ['literal', ['Noto Sans Devanagari Regular v1']],
                        ['literal', ['News Gothic Std Medium']],
                      ],
                    },
                  ],
                ],
              ],
            ],
          ],
          'text-font': ['News Gothic Std Medium'],
          'text-size': ['interpolate', ['linear'], ['zoom'], 3, 11, 7, 16],
          'text-radial-offset': 0.2,
          'text-anchor': 'center',
          'text-transform': 'uppercase',
        },
        paint: {
          'text-color': '#b3b3b3',
          'text-halo-color': '#e0e0e0',
          'text-halo-width': 1,
        },
      },
      {
        id: 'places_locality',
        type: 'symbol',
        source: 'protomaps',
        'source-layer': 'places',
        minzoom: 7,
        filter: [
          'all',
          ['==', 'kind', 'locality'],
          ['!=', 'kind_detail', 'city'],
          ['!in', 'name', 'The Point'],
        ],
        layout: {
          'icon-image': [
            'step',
            ['zoom'],
            ['case', ['==', ['get', 'capital'], 'yes'], 'capital', 'townspot'],
            8,
            '',
          ],
          'icon-size': 0.7,
          'text-field': [
            'case',
            [
              'all',
              ['any', ['has', 'name'], ['has', 'pgf:name']],
              ['!', ['any', ['has', 'name2'], ['has', 'pgf:name2']]],
              ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
            ],
            [
              'case',
              ['has', 'script'],
              [
                'case',
                [
                  'any',
                  ['is-supported-script', ['get', 'name']],
                  ['has', 'pgf:name'],
                ],
                [
                  'format',
                  ['coalesce', ['get', 'name:en'], ['get', 'name:en']],
                  {},
                  '\n',
                  {},
                  [
                    'case',
                    [
                      'all',
                      ['!', ['has', 'name:en']],
                      ['has', 'name:en'],
                      ['!', ['has', 'script']],
                    ],
                    '',
                    ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  ],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                ['get', 'name:en'],
              ],
              [
                'format',
                [
                  'coalesce',
                  ['get', 'name:en'],
                  ['get', 'pgf:name'],
                  ['get', 'name'],
                ],
                {},
              ],
            ],
            [
              'all',
              ['any', ['has', 'name'], ['has', 'pgf:name']],
              ['any', ['has', 'name2'], ['has', 'pgf:name2']],
              ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
            ],
            [
              'case',
              ['all', ['has', 'script'], ['has', 'script2']],
              [
                'format',
                ['get', 'name:en'],
                {},
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script2'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
              ],
              [
                'case',
                ['has', 'script2'],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name2'],
                    ['get', 'name2'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
              ],
            ],
            [
              'case',
              [
                'all',
                ['has', 'script'],
                ['has', 'script2'],
                ['has', 'script3'],
              ],
              [
                'format',
                ['get', 'name:en'],
                {},
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script2'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script3'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
              ],
              [
                'case',
                ['!', ['has', 'script']],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                ['!', ['has', 'script2']],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name2'],
                    ['get', 'name2'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name3'],
                    ['get', 'name3'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
              ],
            ],
          ],
          'text-font': [
            'step',
            ['zoom'],
            ['literal', ['News Gothic Std Medium']],
            12,
            [
              'match',
              ['get', 'kind_detail'],
              'town',
              ['literal', ['News Gothic Std Bold']],
              ['literal', ['News Gothic Std Medium']],
            ],
          ],
          'symbol-sort-key': [
            'case',
            ['has', 'sort_key'],
            ['get', 'sort_key'],
            ['get', 'min_zoom'],
          ],
          'text-padding': [
            'interpolate',
            ['linear'],
            ['zoom'],
            5,
            3,
            8,
            7,
            12,
            11,
          ],
          'text-size': [
            'interpolate',
            ['exponential', 1],
            ['zoom'],
            7,
            12,
            15,
            ['match', ['get', 'kind_detail'], 'town', 20, 'village', 18, 16],
          ],
          'icon-padding': [
            'interpolate',
            ['linear'],
            ['zoom'],
            0,
            0,
            8,
            4,
            10,
            8,
            12,
            6,
            22,
            2,
          ],
          'text-justify': 'auto',
          'text-variable-anchor': [
            'step',
            ['zoom'],
            ['literal', ['bottom', 'left', 'right', 'top']],
            8,
            ['literal', ['center']],
          ],
          'text-radial-offset': 0.3,
          visibility: 'visible',
        },
        paint: {
          'text-color': '#0b1804',
          'text-halo-color': '#f8f7cf',
          'text-halo-width': 1.25,
        },
      },
      {
        id: 'places_locality-city',
        type: 'symbol',
        source: 'protomaps',
        'source-layer': 'places',
        minzoom: 7,
        filter: [
          'all',
          ['==', 'kind', 'locality'],
          ['==', 'kind_detail', 'city'],
        ],
        layout: {
          'icon-image': [
            'step',
            ['zoom'],
            ['case', ['==', ['get', 'capital'], 'yes'], 'capital', 'townspot'],
            8,
            '',
          ],
          'icon-size': 0.7,
          'text-field': [
            'case',
            [
              'all',
              ['any', ['has', 'name'], ['has', 'pgf:name']],
              ['!', ['any', ['has', 'name2'], ['has', 'pgf:name2']]],
              ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
            ],
            [
              'case',
              ['has', 'script'],
              [
                'case',
                [
                  'any',
                  ['is-supported-script', ['get', 'name']],
                  ['has', 'pgf:name'],
                ],
                [
                  'format',
                  ['coalesce', ['get', 'name:en'], ['get', 'name:en']],
                  {},
                  '\n',
                  {},
                  [
                    'case',
                    [
                      'all',
                      ['!', ['has', 'name:en']],
                      ['has', 'name:en'],
                      ['!', ['has', 'script']],
                    ],
                    '',
                    ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  ],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                ['get', 'name:en'],
              ],
              [
                'format',
                [
                  'coalesce',
                  ['get', 'name:en'],
                  ['get', 'pgf:name'],
                  ['get', 'name'],
                ],
                {},
              ],
            ],
            [
              'all',
              ['any', ['has', 'name'], ['has', 'pgf:name']],
              ['any', ['has', 'name2'], ['has', 'pgf:name2']],
              ['!', ['any', ['has', 'name3'], ['has', 'pgf:name3']]],
            ],
            [
              'case',
              ['all', ['has', 'script'], ['has', 'script2']],
              [
                'format',
                ['get', 'name:en'],
                {},
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script2'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
              ],
              [
                'case',
                ['has', 'script2'],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name2'],
                    ['get', 'name2'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
              ],
            ],
            [
              'case',
              [
                'all',
                ['has', 'script'],
                ['has', 'script2'],
                ['has', 'script3'],
              ],
              [
                'format',
                ['get', 'name:en'],
                {},
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script2'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
                '\n',
                {},
                ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                {
                  'text-font': [
                    'case',
                    ['==', ['get', 'script3'], 'Devanagari'],
                    ['literal', ['Noto Sans Devanagari Regular v1']],
                    ['literal', ['News Gothic Std Medium']],
                  ],
                },
              ],
              [
                'case',
                ['!', ['has', 'script']],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name'],
                    ['get', 'name'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                ['!', ['has', 'script2']],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name2'],
                    ['get', 'name2'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name3'], ['get', 'name3']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script3'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
                [
                  'format',
                  [
                    'coalesce',
                    ['get', 'name:en'],
                    ['get', 'pgf:name3'],
                    ['get', 'name3'],
                  ],
                  {},
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name'], ['get', 'name']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                  '\n',
                  {},
                  ['coalesce', ['get', 'pgf:name2'], ['get', 'name2']],
                  {
                    'text-font': [
                      'case',
                      ['==', ['get', 'script2'], 'Devanagari'],
                      ['literal', ['Noto Sans Devanagari Regular v1']],
                      ['literal', ['News Gothic Std Medium']],
                    ],
                  },
                ],
              ],
            ],
          ],
          'text-font': [
            'step',
            ['zoom'],
            ['literal', ['News Gothic Std Medium']],
            12,
            [
              'match',
              ['get', 'kind_detail'],
              'city',
              ['literal', ['News Gothic Std Bold']],
              ['literal', ['News Gothic Std Medium']],
            ],
          ],
          'symbol-sort-key': [
            'case',
            ['has', 'sort_key'],
            ['get', 'sort_key'],
            ['get', 'min_zoom'],
          ],
          'text-padding': [
            'interpolate',
            ['linear'],
            ['zoom'],
            5,
            3,
            8,
            7,
            12,
            11,
          ],
          'text-size': [
            'interpolate',
            ['exponential', 1],
            ['zoom'],
            7,
            12,
            15,
            ['match', ['get', 'kind_detail'], 'city', 22, 'village', 18, 16],
          ],
          'icon-padding': [
            'interpolate',
            ['linear'],
            ['zoom'],
            0,
            0,
            8,
            4,
            10,
            8,
            12,
            6,
            22,
            2,
          ],
          'text-justify': 'auto',
          'text-variable-anchor': [
            'step',
            ['zoom'],
            ['literal', ['bottom', 'left', 'right', 'top']],
            8,
            ['literal', ['center']],
          ],
          'text-radial-offset': 0.3,
          visibility: 'visible',
        },
        paint: {
          'text-color': '#0b1804',
          'text-halo-color': '#f8f7cf',
          'text-halo-width': 1.25,
        },
      },
      {
        id: 'places_country',
        type: 'symbol',
        source: 'protomaps',
        'source-layer': 'places',
        filter: ['==', 'kind', 'country'],
        layout: {
          'symbol-sort-key': [
            'case',
            ['has', 'sort_key'],
            ['get', 'sort_key'],
            ['get', 'min_zoom'],
          ],
          'text-field': [
            'format',
            ['coalesce', ['get', 'name:en'], ['get', 'name:en']],
            {},
          ],
          'text-font': ['News Gothic Std Bold'],
          'text-size': [
            'interpolate',
            ['linear'],
            ['zoom'],
            2,
            [
              'case',
              ['<', ['get', 'population_rank'], 10],
              8,
              ['>=', ['get', 'population_rank'], 10],
              12,
              0,
            ],
            6,
            [
              'case',
              ['<', ['get', 'population_rank'], 8],
              10,
              ['>=', ['get', 'population_rank'], 8],
              18,
              0,
            ],
            8,
            [
              'case',
              ['<', ['get', 'population_rank'], 7],
              11,
              ['>=', ['get', 'population_rank'], 7],
              20,
              0,
            ],
          ],
          'icon-padding': [
            'interpolate',
            ['linear'],
            ['zoom'],
            0,
            2,
            14,
            2,
            16,
            20,
            17,
            2,
            22,
            2,
          ],
          'text-transform': 'uppercase',
        },
        paint: {
          'text-color': '#a3a3a3',
          'text-halo-color': '#e2dfda',
          'text-halo-width': 1,
        },
      },
      {
        id: 'photos-1940s',
        type: 'symbol',
        source: 'photos-1940s',
        'source-layer': 'photos-1940s',
        minzoom: 10,
        layout: {
          'text-optional': true,
          'text-line-height': 1.1,
          'text-size': [
            'interpolate',
            ['exponential', 1],
            ['zoom'],
            0,
            9,
            14,
            12,
            17,
            16,
          ],
          'symbol-sort-key': ['match', ['get', 'storyLabel'], '', 1, 0],
          'icon-image': ['step', ['zoom'], '', 11, 'custom:dot'],
          'text-font': ['News Gothic Std Bold'],
          'icon-allow-overlap': true,
          'text-justify': 'right',
          'text-offset': [-1, 0],
          'icon-size': [
            'interpolate',
            ['linear'],
            ['zoom'],
            14,
            0.1,
            18,
            1,
            22,
            2,
          ],
          'text-anchor': 'right',
          'text-field': ['step', ['zoom'], '', 13, ['get', 'storyLabel']],
          'text-max-width': 8,
          'icon-ignore-placement': true,
          visibility: 'visible',
        },
        paint: {
          'text-halo-color': 'hsla(41, 76%, 95%, 0.6)',
          'text-color': 'hsl(15, 9%, 17%)',
          'text-halo-width': 1,
          'text-halo-blur': 0.5,
          'icon-opacity': [
            'interpolate',
            ['linear'],
            ['zoom'],
            10,
            0,
            13,
            0.19,
            14,
            1,
          ],
          'text-opacity': ['interpolate', ['linear'], ['zoom'], 10, 1, 14, 1],
        },
      },
      {
        id: 'photos-1940s-active',
        type: 'circle',
        source: 'photos-1940s',
        'source-layer': 'photos-1940s',
        layout: { visibility: 'none' },
        paint: {
          'circle-radius': [
            'interpolate',
            ['linear'],
            ['zoom'],
            14,
            1,
            17,
            5,
            22,
            5,
          ],
          'circle-color': 'hsl(14, 9%, 86%)',
          'circle-stroke-width': 2,
          'circle-stroke-color': '#2f2927',
        },
      },
      {
        id: 'lot-label',
        type: 'symbol',
        source: 'bbl',
        'source-layer': 'lots',
        minzoom: 17,
        layout: {
          'text-font': ['News Gothic Std Oblique'],
          'text-field': ['concat', 'Lot ', ['to-string', ['get', 'Lot']]],
          'text-allow-overlap': true,
          'text-ignore-placement': true,
          'text-size': 12,
          visibility: 'none',
        },
        paint: {
          'text-halo-color': 'hsl(14, 68%, 19%)',
          'text-halo-width': 1,
          'text-color': 'hsl(41, 76%, 95%)',
        },
      },
      {
        id: 'block-label',
        type: 'symbol',
        source: 'bbl',
        'source-layer': 'blocks',
        minzoom: 13,
        layout: {
          'text-field': ['concat', 'Block ', ['to-string', ['get', 'Block']]],
          'text-offset': [2, 0],
          'text-font': ['News Gothic Std Oblique'],
          visibility: 'none',
        },
        paint: {
          'text-color': 'hsl(41, 76%, 95%)',
          'text-halo-color': 'hsl(14, 68%, 19%)',
          'text-halo-width': 1,
        },
      },
    ],
    id: '1mzaxzj',
  };
});
